;(function(g){g.fn.extend({autocomplete:function(b,c){var f=typeof b=="string";c=g.extend({},g.Autocompleter.defaults,{url:f?b:null,data:f?null:b,delay:f?g.Autocompleter.defaults.delay:10,max:c&&!c.scroll?10:150},c);c.highlight=c.highlight||function(a){return a};c.formatMatch=c.formatMatch||c.formatItem;return this.each(function(){new g.Autocompleter(this,c)})},result:function(a){return this.bind("result",a)},search:function(a){return this.trigger("search",[a])},flushCache:function(){return this.trigger("flushCache")},setOptions:function(a){return this.trigger("setOptions",[a])},unautocomplete:function(){return this.trigger("unautocomplete")}});g.Autocompleter=function(h,d){var j={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var i=g(h).attr("autocomplete","off").addClass(d.inputClass);var r;var p="";var k=g.Autocompleter.Cache(d);var s=0;var t;var u={mouseDownOnSelect:false};var n=g.Autocompleter.Select(d,h,y,u);var x;g.browser.opera&&g(h.form).bind("submit.autocomplete",function(){if(x){x=false;return false}});i.bind((g.browser.opera?"keypress":"keydown")+".autocomplete",function(a){s=1;t=a.keyCode;switch(a.keyCode){case j.UP:a.preventDefault();if(n.visible()){n.prev()}else{v(0,true)}break;case j.DOWN:a.preventDefault();if(n.visible()){n.next()}else{v(0,true)}break;case j.PAGEUP:a.preventDefault();if(n.visible()){n.pageUp()}else{v(0,true)}break;case j.PAGEDOWN:a.preventDefault();if(n.visible()){n.pageDown()}else{v(0,true)}break;case d.multiple&&g.trim(d.multipleSeparator)==","&&j.COMMA:case j.TAB:case j.RETURN:if(y()){a.preventDefault();x=true;return false}break;case j.ESC:n.hide();break;default:clearTimeout(r);r=setTimeout(v,d.delay);break}}).focus(function(){s++}).blur(function(){s=0;if(!u.mouseDownOnSelect){D()}}).click(function(){if(s++>1&&!n.visible()){v(0,true)}}).bind("search",function(){var e=(arguments.length>1)?arguments[1]:null;function m(a,b){var c;if(b&&b.length){for(var f=0;f1){var m=d.multipleSeparator.length;var o=g(h).selection().start;var q,l=0;g.each(e,function(a,b){l+=b.length;if(o<=l){q=a;return false}l+=m});e[q]=f;f=e.join(d.multipleSeparator)}f+=d.multipleSeparator}i.val(f);z();i.trigger("result",[c.data,c.value]);return true}function v(a,b){if(t==j.DEL){n.hide();return}var c=i.val();if(!b&&c==p)return;p=c;c=A(c);if(c.length>=d.minChars){i.addClass(d.loadingClass);if(!d.matchCase)c=c.toLowerCase();C(c,E,z)}else{B();n.hide()}};function w(b){if(!b)return[""];if(!d.multiple)return[g.trim(b)];return g.map(b.split(d.multipleSeparator),function(a){return g.trim(b).length?g.trim(a):null})}function A(a){if(!d.multiple)return a;var b=w(a);if(b.length==1)return b[0];var c=g(h).selection().start;if(c==a.length){b=w(a)}else{b=w(a.replace(a.substring(c),""))}return b[b.length-1]}function F(a,b){if(d.autoFill&&(A(i.val()).toLowerCase()==a.toLowerCase())&&t!=j.BACKSPACE){i.val(i.val()+b.substring(A(p).length));g(h).selection(p.length,p.length+b.length)}};function D(){clearTimeout(r);r=setTimeout(z,200)};function z(){var c=n.visible();n.hide();clearTimeout(r);B();if(d.mustMatch){i.search(function(a){if(!a){if(d.multiple){var b=w(i.val()).slice(0,-1);i.val(b.join(d.multipleSeparator)+(b.length?d.multipleSeparator:""))}else{i.val("");i.trigger("result",null)}}})}};function E(a,b){if(b&&b.length&&s){B();n.display(b,a);F(a,b[0].value);n.show()}else{z()}};function C(c,f,e){if(!d.matchCase)c=c.toLowerCase();var m=k.load(c);if(m&&m.length){f(c,m)}else if((typeof d.url=="string")&&(d.url.length>0)){var o={timestamp:+new Date()};g.each(d.extraParams,function(a,b){o[a]=typeof b=="function"?b():b});g.ajax({mode:"abort",port:"autocomplete"+h.name,dataType:d.dataType,url:d.url,data:g.extend({q:A(c),limit:d.max},o),success:function(a){var b=d.parse&&d.parse(a)||G(a);k.add(c,b);f(c,b)}})}else{n.emptyList();e(c)}};function G(a){var b=[];var c=a.split("\n");for(var f=0;f]*)("+b.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"$1")},scroll:true,scrollHeight:180};g.Autocompleter.Cache=function(d){var j={};var i=0;function r(a,b){if(!d.matchCase)a=a.toLowerCase();var c=a.indexOf(b);if(d.matchContains=="word"){c=a.toLowerCase().search("\\b"+b.toLowerCase())}if(c==-1)return false;return c==0||d.matchContains};function p(a,b){if(i>d.cacheLength){s()}if(!j[a]){i++}j[a]=b}function k(){if(!d.data)return false;var c={},f=0;if(!d.url)d.cacheLength=1;c[""]=[];for(var e=0,m=d.data.length;e0){var m=j[e];g.each(m,function(a,b){if(r(b.value,c)){f.push(b)}})}}return f}else if(j[c]){return j[c]}else if(d.matchSubset){for(var o=c.length-1;o>=d.minChars;o--){var m=j[c.substr(0,o)];if(m){var f=[];g.each(m,function(a,b){if(r(b.value,c)){f[f.length]=b}});return f}}}return null}}};g.Autocompleter.Select=function(e,m,o,q){var l={ACTIVE:"ac_over"};var h,d=-1,j,i="",r=true,p,k;function s(){if(!r)return;p=g("
").hide().addClass(e.resultsClass).css("position","absolute").appendTo(document.body);k=g("
").appendTo(p).mouseover(function(a){if(t(a).nodeName&&t(a).nodeName.toUpperCase()=='LI'){d=g("li",k).removeClass(l.ACTIVE).index(t(a));g(t(a)).addClass(l.ACTIVE)}}).click(function(a){g(t(a)).addClass(l.ACTIVE);o();m.focus();return false}).mousedown(function(){q.mouseDownOnSelect=true}).mouseup(function(){q.mouseDownOnSelect=false});if(e.width>0)p.css("width",e.width);r=false}function t(a){var b=a.target;while(b&&b.tagName!="LI")b=b.parentNode;if(!b)return[];return b}function u(a){h.slice(d,d+1).removeClass(l.ACTIVE);n(a);var b=h.slice(d,d+1).addClass(l.ACTIVE);if(e.scroll){var c=0;h.slice(0,d).each(function(){c+=this.offsetHeight});if((c+b[0].offsetHeight-k.scrollTop())>k[0].clientHeight){k.scrollTop(c+b[0].offsetHeight-k.innerHeight())}else if(c=h.size()){d=0}}function x(a){return e.max&&e.max").html(e.highlight(c,i)).addClass(b%2==0?"ac_even":"ac_odd").appendTo(k)[0];g.data(f,"ac_data",j[b])}h=k.find("li");if(e.selectFirst){h.slice(0,1).addClass(l.ACTIVE);d=0}if(g.fn.bgiframe)k.bgiframe()}return{display:function(a,b){s();j=a;i=b;y()},next:function(){u(1)},prev:function(){u(-1)},pageUp:function(){if(d!=0&&d-8<0){u(-d)}else{u(-8)}},pageDown:function(){if(d!=h.size()-1&&d+8>h.size()){u(h.size()-1-d)}else{u(8)}},hide:function(){p&&p.hide();h&&h.removeClass(l.ACTIVE);d=-1},visible:function(){return p&&p.is(":visible")},current:function(){return this.visible()&&(h.filter("."+l.ACTIVE)[0]||e.selectFirst&&h[0])},show:function(){var a=g(m).offset();p.css({width:typeof e.width=="string"||e.width>0?e.width:g(m).width(),top:a.top+m.offsetHeight,left:a.left}).show();if(e.scroll){k.scrollTop(0);k.css({maxHeight:e.scrollHeight,overflow:'auto'});if(g.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var b=0;h.each(function(){b+=this.offsetHeight});var c=b>e.scrollHeight;k.css('height',c?e.scrollHeight:b);if(!c){h.width(k.width()-parseInt(h.css("padding-left"))-parseInt(h.css("padding-right")))}}}},selected:function(){var a=h&&h.filter("."+l.ACTIVE).removeClass(l.ACTIVE);return a&&a.length&&g.data(a[0],"ac_data")},emptyList:function(){k&&k.empty()},unbind:function(){p&&p.remove()}}};g.fn.selection=function(b,c){if(b!==undefined){return this.each(function(){if(this.createTextRange){var a=this.createTextRange();if(c===undefined||b==c){a.move("character",b);a.select()}else{a.collapse(true);a.moveStart("character",b);a.moveEnd("character",c);a.select()}}else if(this.setSelectionRange){this.setSelectionRange(b,c)}else if(this.selectionStart){this.selectionStart=b;this.selectionEnd=c}})}var f=this[0];if(f.createTextRange){var e=document.selection.createRange(),m=f.value,o="<->",q=e.text.length;e.text=o;var l=f.value.indexOf(o);f.value=m;this.selection(l,l+q);return{start:l,end:l+q}}else if(f.selectionStart!==undefined){return{start:f.selectionStart,end:f.selectionEnd}}}})(jQuery);jQuery.ajaxQueue=function(a){var b=a.complete;a.complete=function(){if(b)b.apply(this,arguments);jQuery.dequeue(jQuery.ajaxQueue,"ajax")};jQuery([jQuery.ajaxQueue]).queue("ajax",function(){jQuery.ajax(a)})};jQuery.ajaxSync=function(b){var c=jQuery.ajaxSync.fn,f=jQuery.ajaxSync.data,e=c.length;c[e]={error:b.error,success:b.success,complete:b.complete,done:false};f[e]={error:[],success:[],complete:[]};b.error=function(){f[e].error=arguments};b.success=function(){f[e].success=arguments};b.complete=function(){f[e].complete=arguments;c[e].done=true;if(e==0||!c[e-1])for(var a=e;a