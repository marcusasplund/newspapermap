(function(){function k(a,b){var c=this.a=new h;this.e=a;this.options=v(b,w);this.f=new p.InfoWindow;this.build();c.setCenterPoint(a);this.options.resultSetSize&&c.setResultSetSize(this.options.resultSetSize);c.setSearchCompleteCallback(this,k.prototype.searchCompleteCallback);typeof this.options.buildCompleteCallback=="function"&&this.options.buildCompleteCallback.apply(this,[])}function h(){this.options={v:"1.0",callback:"window.jeremy.gLocalSearch.callback",context:h.searchers.length};h.searchers.push(this)}
function l(a,b,c){c=this.options=v(c,{buttonText:"Search",hintString:"Search the map!"});var d=this;a=d.form=e("form","gsc-search-box",[e("table","gsc-search-box",[e("tbody",null,[e("tr",null,[e("td","gsc-input",[d.input=e("input","gsc-input",null,{type:"text",autocomplete:"off",size:10,name:"search",title:"search",value:c.hintString,onfocus:q(d,l.prototype.i),onblur:q(d,l.prototype.i)})]),e("td","gsc-search-button",[d.button=e("input","gsc-search-button",null,{type:"submit",value:c.buttonText,title:"search"})]),
d.l=a?e("td","gsc-clear-button",[e("div","gsc-clear-button",[" "],{title:"clear results",onclick:function(){d.form.clearResults()}})]):null])])],{cellspacing:0,cellpadding:0}),e("table","gsc-branding",[e("tbody",null,[e("tr",null,[e("td","gsc-branding-user-defined"),e("td","gsc-branding-text",[e("div","gsc-branding-text",["powered by"])]),e("gsc-branding-img-noclear",[e("img","gsc-branding-img-noclear",null,{src:"http://www.google.com/uds/css/small-logo.png"})])])])])],{"accept-charset":"utf-8"});
b&&b.appendChild(a)}function e(a,b,c,d,i){a=document.createElement(a||"div");if(b)a.className=b;if(c)for(var j=0;j<c.length;j++){b=c[j];if(typeof b=="string"||typeof b=="number")a.innerHTML+=b;else try{a.appendChild(c[j])}catch(r){}}if(d)for(j in d)if(j.match(/^on/)&&m(d[j],"function"))a[j]=d[j];else a.setAttribute(j,d[j]);if(i)for(j in i)a.style[j]=i[j];return a}function f(a,b,c,d){return e("div",a,b,c,d)}function q(a,b,c){return function(){return b.apply(a,c?c:arguments)}}function v(){for(var a=
{},b=arguments||[],c=0;c<b.length;c++){var d=b[c];for(var i in d)if(typeof a[i]=="undefined")a[i]=d[i]}return a}function m(a,b){return typeof a==b}for(var p=google.maps,w={resultSetSize:8,clearResultsString:"X",minimizeResultsString:"_",maximizeResultsString:"^",icons:[],shadow:new p.MarkerImage("http://www.google.com/mapfiles/gadget/shadow50Small80.png",null,null,new p.Point(8,28)),showResultsList:true,showResultsMarkers:false,searchFormOptions:{}},s=0;s<8;s++)w.icons.push(google.loader.ServiceBase+
"/solutions/localsearch/img/pin_metalred_"+String.fromCharCode(65+s)+".png");if(!window.noGBarCSS){s=e("link",null,null,{href:"http://www.google.com/uds/solutions/localsearch/gmlocalsearch.css",rel:"stylesheet",type:"text/css"});var y=e("link",null,null,{href:"default.css",rel:"stylesheet",type:"text/css"}),x=document.getElementsByTagName("head")[0];x.appendChild(s);x.appendChild(y)}k.prototype.build=function(){var a=this,b=a.options;a.container=f("gmls",[a.innerContainer=f("gmls-app gmls-idle gmls-app-full-mode gmls-std-mode",
[a.resultsDiv=f("gmls-results-popup gmls-results-popup-maximized",[f("gmls-results-list",[f("gmls-results-table",[e("table","gmls-results-table",[a.resultsTable=e("tbody")])]),f("gmls-results-controls",[e("table","gmls-results-controls",[e("tbody",null,[e("tr",null,[e("td","gmls-more-results gsc-results",[f("gsc-cursor-box",[a.pageDiv=f("gsc-cursor")])]),e("td","gmls-prev-next"),e("td","gmls-clear-results",[f("gmls-minimize-results gmls-control-button",[a.options.minimizeResultsString],{onclick:function(){a.minimizeResults()}}),
f("gmls-maximize-results gmls-control-button",[a.options.maximizeResultsString],{onclick:function(){a.maximizeResults()}}),f("gmls-clear-results gmls-control-button",[a.options.clearResultsString],{onclick:function(){a.form.clearResults()}})])])])])]),a.attributionDiv=f("gmls-attribution")])]),a.c=f("gmls-search-form gmls-search-form-idle")])]);b=a.form=new l(0,a.c,b.o);a.input=b.input;function c(){a.c.className=a.c.className.replace(/\bgmls-search-form-idle\b/,"gmls-search-form-active")}b.setOnFocusListener(a,
c);b.setOnBlurListener(a,c);b.setOnSubmitCallback(a,k.prototype.execute);b.setOnClearCallback(a,k.prototype.clearResults)};k.prototype.execute=function(a){var b=this.a,c=this.input;this.clearResults();if(typeof a=="string")c.value=a;b.execute(c.value);return false};k.prototype.clearResults=function(){var a=this.resultsTable,b=this.innerContainer,c=this.a.results,d=this.pageDiv;this.f.close();b.className=b.className.replace(/\bgmls-active\b/,"gmls-idle");if(c){for(;a.firstChild;)a.removeChild(a.firstChild);
for(;d.firstChild;)d.removeChild(d.firstChild);for(a=0;a<c.length;a++)c[a].marker.setMap(null)}};k.prototype.minimizeResults=function(){var a=this.resultsDiv;a.className=a.className.replace(/\b(gmls-results-popup-)maximized\b/g,"$1minimized")};k.prototype.maximizeResults=function(){var a=this.resultsDiv;a.className=a.className.replace(/\b(gmls-results-popup-)minimized\b/g,"$1maximized")};k.prototype.searchCompleteCallback=function(){var a=this,b=a.a,c=b.results,d=b.cursor,i=a.pageDiv,j=a.resultsTable;
b.getAttribution();var r=a.e,n=a.options;b=b.resultViewport;var g=new p.LatLngBounds(new p.LatLng(parseFloat(b.sw.lat),parseFloat(b.sw.lng)),new p.LatLng(parseFloat(b.ne.lat),parseFloat(b.ne.lng)));b=a.innerContainer;function z(u){return function(){k.prototype.selectResult.apply(a,[u])}}function A(u){return function(){a.gotoPage(u)}}n.suppressCenterAndZoom||r.fitBounds(g);for(g=0;g<c.length;g++){var o=c[g],t=String.fromCharCode(65+g);t=o.listHtml=e("tr",null,[e("td",null,[f("gmls-result-list-item",
[f("gmls-result-list-item-key gmls-result-list-item-key-"+t+" gmls-result-list-item-key-local-"+t+" gmls-result-list-item-key-keymode",["&nbsp;"]),f("gs-title",[o.title]),f("gs-street",["&nbsp;-&nbsp;"+o.streetAddress])])])]);var B=o.marker=new p.Marker({map:n.showResultsMarkers?r:null,position:new p.LatLng(parseFloat(o.lat),parseFloat(o.lng)),title:o.title,icon:typeof n.icons=="string"?n.icons:n.icons[g],shadow:n.shadow,shape:n.markerShape});o=z(o);p.event.addDomListener(t,"click",o);p.event.addListener(B,
"click",o);n.showResultsList&&j.appendChild(t)}for(g=0;d.pages&&g<d.pages.length;g++)i.appendChild(f("gsc-cursor-page"+(g==d.currentPageIndex?" gsc-cursor-current-page":""),[d.pages[g].label],{onclick:A(g)}));b.className=b.className.replace(/\bgmls-idle\b/,"gmls-active")};k.prototype.setResultSetSize=function(a){this.a.setResultSetSize(a)};k.prototype.selectResult=function(a){for(var b=this.a,c=b.results,d=this.e,i=this.f,j=a.marker,r=0;r<b.results.length;r++){var n=c[r],g=n.listHtml.firstChild.firstChild;
if(n===a){if(!g.className.match(/\bgmls-selected\b/))g.className=g.className+=" gmls-selected"}else g.className=g.className.replace(/ gmls-selected/g,"")}i.close();i.setContent(a.html);i.open(d,j)};k.prototype.gotoPage=function(a){var b=this.a;this.clearResults();b.gotoPage(a)};h.prototype.setCenterPoint=function(a){var b=this.options;if(m(a.lat,"function")&&m(a.lng,"function")&&m(a.toUrlValue,"function"))b.sll=a.toUrlValue(6);else if(m(a.getCenter,"function")&&m(a.getBounds,"function")){b.sll=function(){return a.getCenter().toUrlValue(6)};
b.gll=function(){return a.getBounds().toUrlValue(7).replace(/\./g,"")};b.sspn=function(){return a.getBounds().toSpan().toUrlValue(6)}}else if(m(a,"string"))b.sll=a};h.prototype.setResultSetSize=function(a){this.options.rsz=a};h.prototype.execute=function(a,b){var c=this.options,d=this.j;if(!m(b,"number")||!d){d=[];for(var i in c)d.push([i,encodeURIComponent(m(c[i],"function")?c[i]():c[i])].join("="))}b&&d.push(["start",encodeURIComponent(b)].join("="));d.push(["q",encodeURIComponent(a?a:this.b)].join("="));
if(a||b&&this.b){this.b=a||this.b;c=e("script",null,null,{type:"text/javascript",src:h.k+d.join("&")});document.getElementsByTagName("head")[0].appendChild(c)}this.j=d.slice(0,d.length-(b?2:1))};h.prototype.setSearchCompleteCallback=function(a,b,c){this.h=q(a,b,c)};h.prototype.gotoPage=function(a){var b=this.options.rsz;m(b,"number")||(b=m(b,"string")&&b.match(/^large$/)?8:4);this.execute(this.b,b*a)};h.prototype.RAWcallback=function(a){var b=this.results=a.results;this.cursor=a.cursor;this.resultViewport=
a.viewport;this.d=a.attribution;for(a=0;a<b.length;a++)this.createResultHtml(b[a]);m(this.h,"function")&&this.h()};h.prototype.getAttribution=function(){if(!this.d)return false;return f("gs-results-attribution",[this.d])};h.prototype.createResultHtml=function(a){a.html=f("gs-result gs-localResult",[f("gs-title",[e("a","gs-title",[a.title],{href:a.url})]),f("gs-snippet",[a.snippet]),f("gs-address",[f("gs-street gs-addressLine",[a.streetAddress]),f("gs-city gs-addressLine",[a.city+", "+a.region]),f("gs-country",
[a.country])]),f("gs-phone",[a.phoneNumbers&&a.phoneNumbers[0]?a.phoneNumbers[0].number:null]),f("gs-directions")])};h.searchers=[];h.callback=function(a,b){h.searchers[a].RAWcallback(b)};h.k="http://ajax.googleapis.com/ajax/services/search/local?";l.prototype.setOnSubmitCallback=function(a,b,c){var d=this.form;c||(c=[]);c.splice(0,0,this);d.onsubmit=q(a,b,c)};l.prototype.setOnClearCallback=function(a,b,c){c||(c=[]);c.splice(0,0,this);this.g=q(a,b,c)};l.prototype.execute=function(a){var b=this.form;
this.input.value=a;b.submit()};l.prototype.setOnFocusListener=function(a,b,c){this.n=q(a,b,c)};l.prototype.setOnBlurListener=function(a,b,c){this.m=q(a,b,c)};l.prototype.i=function(a){var b=this.input,c=this.options.hintString;if(!a)a=window.event;if(a.type=="focus"){if(b.value==c)b.value="";if(this.onfocuslistener)return this.onfocuslistener()}else if(a.type=="blur"){if(b.value=="")b.value=c;if(this.onblurlistener)return this.onblurlistener()}};l.prototype.clearResults=function(){this.form.reset();
if(this.g)return this.g()};window.jeremy||(window.jeremy={});window.jeremy.jGoogleBar=k;window.jeremy.jGoogleBar.prototype=k.prototype;window.jeremy.gLocalSearch=h;window.jeremy.gLocalSearch.prototype=h.prototype;window.jeremy.SearchForm=l;window.jeremy.SearchForm.prototype=l.prototype})();
